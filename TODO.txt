# Sprints context:
 (keep the in mind when moving to the next sprints):
organizations exist in order to be able to have certain projects on each one, seperate users by user role (not project role) that means admin manager and employee and assign members to projects and keep track of all the projects of an organization.
 i need to make sure you understand what i want. there is already big part of the code implemented. what i want to happen is the time tracking can take place even offline and be added to the local database. then sent to the supabase after certain intervals. i dont want to implement that yet just clarifying how the flow works. this means certain handlers communicate with supabase immediately others with the sqlite datbase.

# Dev Time Tracker - Migration & Enhancement TODO List

## Phase 1: Database Schema Preparation
### Local Database Updates
- [x] Add new fields to existing tables:
  - [x] Add 'synced' boolean flag
  - [x] Add 'org_id' field
  - [x] Add 'local_id' UUID field
  - [x] Add 'last_modified' timestamp
- [x] Update database queries to handle new fields

### Supabase Setup
- [x] Create Supabase project
- [x] Design cloud database schema
  - [x] Users table with organization links
  - [x] Organizations table
  - [x] Time tracking tables
  - [x] Projects and teams tables
- [x] Set up Row Level Security (RLS)
  - [x] Define access policies for each table
  - [x] Test security rules
- [x] Configure authentication settings
  - [x] Basic email/password auth working
  - [x] Auto-create user profile trigger
  - [x] CSP configured for Supabase connection
  - [x] Set up email templates (NEXT STEP)
  - [x] Configure OAuth providers (optional)

## Phase 2: Authentication Implementation
### UI Development
- [x] Create login screen
- [x] Create signup screen
- [x] Add auth error handling
- [x] Add password reset flow
- [ ] Create organization setup wizard
- [ ] Add profile management page

### Authentication Logic
- [x] Implement Supabase auth integration
- [x] Set up secure token storage (handled by Supabase)
- [x] Add session management
- [x] Implement login state persistence
- [x] Add auth error handling
- [x] Fix logout functionality

## Phase 3: Local-Cloud Sync System
### Sync Infrastructure
- [ ] Create sync queue system
- [ ] Implement network status detection
- [ ] Add sync status indicators in UI
- [ ] Create sync logging system

### Sync Logic
- [ ] Implement background sync process
- [ ] Add conflict resolution handling
- [ ] Create batch processing system
- [ ] Add retry mechanism for failed syncs
- [ ] Implement data validation

## Phase 4: Organization Management

### Sprint 1: Database Foundation
- [x] Create org_join_requests table
- [x] Add helper SQL functions for role checks
- [x] Update RLS policies for role-based access
- [x] Auto-create personal organization on signup
- [x] Add approve/reject join request functions

### Sprint 2: Backend API + IPC Handlers ✅ COMPLETE
- [x] Create src/supabase/organizations.ts
- [x] Create src/supabase/orgRequests.ts
- [x] Create src/supabase/cloudProjects.ts
- [x] Create src/types/organization.types.ts
- [x] Add organization IPC handlers (organizationHandlers.ts)
- [x] Add renderer API wrapper (organizationApi.ts)
- [x] Fix all TypeScript errors
- [x] Register handlers in src/index.ts

### Sprint 3: Frontend - Organization Tab UI (IN PROGRESS)
- [x] Create renderer/organizationTab.ts (main tab file)
- [x] Display current organization info
- [x] Show member list with roles
- [x] Create/Join organization UI
- [x] Join request management (admin view)
- [x] Member role management (admin/manager)
- [x] Add Organization tab to navigation
- [x] Create organization.css styles

### Sprint 4: Frontend - Project Assignment UI ✅ COMPLETE
- [x] List organization cloud projects
- [x] Create/Edit cloud projects UI
- [x] Project member management UI
- [x] Assign members to projects UI
- [x] Update member roles in projects
- [x] Archive/restore cloud projects
- [x] Add CSS styles for cloud projects section

### Sprint 5: Frontend - Profile Integration
- [ ] Add Organization chapter to Profile tab
- [ ] Create permission helper utilities
- [ ] Update Dashboard tab with role-based views

### Organization Features (Future)
- [ ] Create organization settings page
- [ ] Add team management interface
- [ ] Implement role management system
- [ ] Create user invitation system
- [ ] Add organization switching

### Access Control
- [x] Implement role-based access control (Sprint 1)
- [x] Set up data visibility rules (Sprint 1)
- [ ] Add audit logging system
- [ ] Create user restriction system

## Phase 5: Real-time Features
### Real-time Infrastructure
- [ ] Set up Supabase real-time channels
- [ ] Implement live updates for time tracking
- [ ] Add presence indicators
- [ ] Create notification system

### Dashboard Updates
- [ ] Add real-time team activity feed
- [ ] Create live project status updates
- [ ] Implement real-time analytics
- [ ] Add live collaboration features

## Phase 6: Nice-to-Have Features
- [ ] Gamification
    - [ ] Simple rewards for meeting time goals
    - [ ] Leaderboards for teams
    - [ ] Basic achievement tracking
    - [ ] Badges for milestones
- [ ] Advanced Analytics
    - [ ] Team performance metrics
    - [ ] Project statistics view 
    - [ ] Integrations
    - [ ] Calendar integration
    - [ ] Google OAuth

## Production
- [ ] keyboard shortcuts